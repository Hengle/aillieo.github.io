<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"aillieo.cn","root":"/","scheme":"Mist","version":"7.8.0","exturl":false,"sidebar":{"position":"right","display":"hide","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"appID":"EM0NG1L32X","apiKey":"862c62ca101f920300ddfebb30fcba33","indexName":"aillieo-collection","hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="shell相关概念shell和shell脚本shell是一个用 C 语言编写的程序，它是用户使用Unix&#x2F;Linux的桥梁，用户的大部分工作都是通过shell完成的。shell虽然不是Unix&#x2F;Linux系统内核的一部分，但它调用了系统核心的大部分功能来执行程序、建立文件并以并行的方式协调各个程序的运行。 而shell脚本，是一种为shell编写的脚本程序。shell脚本是解释执行的，不需要编译。">
<meta property="og:type" content="article">
<meta property="og:title" content="shell脚本基础">
<meta property="og:url" content="http://aillieo.cn/post/2017-05-07-shell-script-basics/index.html">
<meta property="og:site_name" content="Aillieo Collection">
<meta property="og:description" content="shell相关概念shell和shell脚本shell是一个用 C 语言编写的程序，它是用户使用Unix&#x2F;Linux的桥梁，用户的大部分工作都是通过shell完成的。shell虽然不是Unix&#x2F;Linux系统内核的一部分，但它调用了系统核心的大部分功能来执行程序、建立文件并以并行的方式协调各个程序的运行。 而shell脚本，是一种为shell编写的脚本程序。shell脚本是解释执行的，不需要编译。">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2017-05-07T06:42:10.000Z">
<meta property="article:modified_time" content="2020-07-09T16:06:33.048Z">
<meta property="article:author" content="Aillieo">
<meta property="article:tag" content="shell">
<meta property="article:tag" content="bash">
<meta property="article:tag" content="脚本">
<meta property="article:tag" content="linux">
<meta property="article:tag" content="unix">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://aillieo.cn/post/2017-05-07-shell-script-basics/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>shell脚本基础 | Aillieo Collection</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Aillieo Collection</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">SUBTITLE</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container"></div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="algolia-results">
  <div id="algolia-stats"></div>
  <div id="algolia-hits"></div>
  <div id="algolia-pagination" class="algolia-pagination"></div>
</div>

      
    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://aillieo.cn/post/2017-05-07-shell-script-basics/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Aillieo">
      <meta itemprop="description" content="PROGRAMMING | GAMES | DESIGN">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Aillieo Collection">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          shell脚本基础
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-05-07 14:42:10" itemprop="dateCreated datePublished" datetime="2017-05-07T14:42:10+08:00">2017-05-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-07-10 00:06:33" itemprop="dateModified" datetime="2020-07-10T00:06:33+08:00">2020-07-10</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Shell/" itemprop="url" rel="index"><span itemprop="name">Shell</span></a>
                </span>
            </span>

          
            <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span id="busuanzi_value_page_pv"></span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h2 id="shell相关概念"><a href="#shell相关概念" class="headerlink" title="shell相关概念"></a>shell相关概念</h2><h3 id="shell和shell脚本"><a href="#shell和shell脚本" class="headerlink" title="shell和shell脚本"></a>shell和shell脚本</h3><p>shell是一个用 C 语言编写的程序，它是用户使用Unix/Linux的桥梁，用户的大部分工作都是通过shell完成的。shell虽然不是Unix/Linux系统内核的一部分，但它调用了系统核心的大部分功能来执行程序、建立文件并以并行的方式协调各个程序的运行。</p>
<p>而shell脚本，是一种为shell编写的脚本程序。shell脚本是解释执行的，不需要编译。</p>
<p>本文中的各shell脚本示例均是在OSX系统编写和执行，其它系统可能会有一些较小的差别。</p>
<a id="more"></a>

<h3 id="shell脚本解释器"><a href="#shell脚本解释器" class="headerlink" title="shell脚本解释器"></a>shell脚本解释器</h3><p>shell脚本的执行需要解释器，最常见的有sh和bash：</p>
<ul>
<li>sh</li>
</ul>
<p>sh全称Bourne Shell，是UNIX最初使用的shell，在每种 UNIX 上都可以使用</p>
<ul>
<li>bash</li>
</ul>
<p>bash全称Bourne Again Shell，是Linux默认的shell脚本解释器，是Bourne Shell的扩展</p>
<p>在编写shell脚本时，需要在脚本的第一行指定执行脚本的解释器，</p>
<p>在脚本的第一行需要指定执行脚本的解释器，如指定为sh：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/sh</span></span><br></pre></td></tr></table></figure>

<p>或指定bash：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br></pre></td></tr></table></figure>

<p>除了以上两种之外，还有一些其它常见的shell脚本解释器，如C Shell（<code>/usr/bin/csh</code>）、K Shell（<code>/usr/bin/ksh</code>）和Shell for Root（<code>/sbin/sh</code>）等。</p>
<h3 id="脚本的执行"><a href="#脚本的执行" class="headerlink" title="脚本的执行"></a>脚本的执行</h3><p>对于shell脚本文件<code>script.sh</code>：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 首先为脚本增加执行权限</span></span><br><span class="line">chmod +x script.sh</span><br><span class="line"><span class="meta">#</span><span class="bash"> 运行</span></span><br><span class="line">./script.sh</span><br></pre></td></tr></table></figure>

<h2 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h2><p>注释分为单行注释和多行注释。单行注释用<code>#</code>标记注释的开始：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> comment</span></span><br></pre></td></tr></table></figure>
<p>多行注释可以通过很多种方式实现，比较常用的一种如下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">: '</span><br><span class="line">comment 1</span><br><span class="line">comment 2</span><br><span class="line">comment 3</span><br><span class="line">'</span><br></pre></td></tr></table></figure>

<h2 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h2><h3 id="定义与使用"><a href="#定义与使用" class="headerlink" title="定义与使用"></a>定义与使用</h3><p>定义变量时，直接使用“变量名=变量值”，注意<strong>变量名与等号、等号与变量值之间不能有空格</strong>，如：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">variableName="value"</span><br></pre></td></tr></table></figure>

<p>变量名首个字符必须为大写或小写字母；中间不能有空格，可以使用下划线（_）；不能使用标点符号；不能使用保留的关键字。</p>
<p>使用已经定义过的变量时，在变量名之前加<code>$</code>符号即可（为了标记变量名的边界，需要使用大括号将变量名包起来）：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">variableName="value"</span><br><span class="line">echo $variableName # 输出 "value"</span><br><span class="line">echo $&#123;variableName&#125; # 输出 "value"</span><br><span class="line">echo $&#123;variableName&#125;IsTheValueOfVariableName # 使用大括号标记变量名边界</span><br><span class="line">variableName="value2"   # 修改变量的值 注意此时不加$符号 相当于重新定义</span><br><span class="line">echo $variableName # 输出 "value2"</span><br></pre></td></tr></table></figure>

<h3 id="设为只读"><a href="#设为只读" class="headerlink" title="设为只读"></a>设为只读</h3><p>将变量设置为只读，设置为只读的变量不能对其重新赋值：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">readonly variableName</span><br></pre></td></tr></table></figure>

<h3 id="销毁"><a href="#销毁" class="headerlink" title="销毁"></a>销毁</h3><p>当不再使用一个变量时，即可将其销毁：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">unset variableName</span><br></pre></td></tr></table></figure>
<p>注意<code>unset</code>不可作用于只读的变量。</p>
<h3 id="操作环境变量"><a href="#操作环境变量" class="headerlink" title="操作环境变量"></a>操作环境变量</h3><p>在shell脚本中可以查看或修改系统的环境变量，如：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">echo $PATH</span><br><span class="line">echo $HOME</span><br><span class="line">echo $PWD</span><br></pre></td></tr></table></figure>

<h2 id="脚本执行参数"><a href="#脚本执行参数" class="headerlink" title="脚本执行参数"></a>脚本执行参数</h2><p>在执行shell脚本时，可以向脚本传递参数，跟在脚本名称后边，使用空格分隔，如：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./test.sh debug 1 666</span><br></pre></td></tr></table></figure>

<p>表示执行脚本<code>test.sh</code>，同时向脚本传递三个参数，依次为<code>debug</code>、<code>1</code>和<code>666</code>。在脚本内部，可以通过<code>$n</code>的形式获取脚本执行参数，对于上述命令，在<code>test.sh</code>内部可获取到的<code>$0</code>、<code>$1</code>、 <code>$2</code>和 <code>$3</code>依次为：<code>./test.sh</code> 、 <code>debug</code>、 <code>1</code>和 <code>666</code>。</p>
<p>除了使用<code>$n</code>获取执行参数之外，还有一些其它的特殊变量：</p>
<ul>
<li><code>$#</code>： 传递给脚本的执行参数的个数</li>
<li><code>$*</code>： 以一个单字符串显示所有向脚本传递的参数。<code>&quot;$*&quot;</code>将以 <code>&quot;$1 $2 ... $n&quot;</code> 的形式输出所有参数</li>
<li><code>$@</code>： 与<code>$*</code>相同，<code>&quot;$@&quot;</code>将以 <code>&quot;$1&quot; &quot;$2&quot; ... &quot;$n&quot;</code> 的形式输出所有参数</li>
<li><code>$$</code>： 脚本运行的当前进程ID号                             </li>
<li><code>$!</code>： 后台运行的最后一个进程的ID号                          </li>
<li><code>$-</code>： 显示Shell使用的当前选项</li>
<li><code>$?</code>： 显示最后命令的退出状态，0表示没有错误，其他任何值表明有错误</li>
</ul>
<h2 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h2><h3 id="字符串的表示"><a href="#字符串的表示" class="headerlink" title="字符串的表示"></a>字符串的表示</h3><p>字符串可以用双引号或者单引号表示，两种方法表示的字符串略有不同：</p>
<h4 id="使用双引号"><a href="#使用双引号" class="headerlink" title="使用双引号"></a>使用双引号</h4><p>双引号表示的字符串中，可以使用变量或转义字符，</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">name="world"</span><br><span class="line">str1="Hello $&#123;name&#125;! "</span><br><span class="line">str2="name is \"$name\" "</span><br></pre></td></tr></table></figure>

<h4 id="使用单引号"><a href="#使用单引号" class="headerlink" title="使用单引号"></a>使用单引号</h4><p>使用单引号时，单引号内部的变量和转义字符不会生效，而是保留字面内容：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">name='world'</span><br><span class="line">str='$name is "world"'</span><br></pre></td></tr></table></figure>

<h3 id="字符串的操作"><a href="#字符串的操作" class="headerlink" title="字符串的操作"></a>字符串的操作</h3><h4 id="获取长度"><a href="#获取长度" class="headerlink" title="获取长度"></a>获取长度</h4><p>使用<code>#</code>来获取字符串长度：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">string="hello"</span><br><span class="line">length=$&#123;#string&#125;</span><br><span class="line">echo $length</span><br></pre></td></tr></table></figure>

<h4 id="字符串拼接"><a href="#字符串拼接" class="headerlink" title="字符串拼接"></a>字符串拼接</h4><p>其实是在字符串中包含字符串变量：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">str1="hello"</span><br><span class="line">str2="world"</span><br><span class="line">str3="$&#123;str1&#125; $&#123;str2&#125;!"</span><br><span class="line">echo $str3</span><br></pre></td></tr></table></figure>

<h4 id="提取子串"><a href="#提取子串" class="headerlink" title="提取子串"></a>提取子串</h4><p>提取字符串具体有以下四种方式：</p>
<ul>
<li><code>str:B</code>：指定起始位置，截取到最后</li>
<li><code>str:B:L</code>：指定起止位置和截取长度</li>
<li><code>str:0-B</code>：反向指定起始位置，截取到最后</li>
<li><code>str:0-B:L</code>：反向指定起始位置，并指定向后截取的长度</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">str="hello world"</span><br><span class="line">echo $&#123;str:6&#125; # 输出 world</span><br><span class="line">echo $&#123;str:2:2&#125; # 输出 ll</span><br><span class="line">echo $&#123;str:0-5&#125; # 输出 world</span><br><span class="line">echo $&#123;str:0-9:2&#125; # 输出 ll</span><br></pre></td></tr></table></figure>

<h4 id="截取字符串"><a href="#截取字符串" class="headerlink" title="截取字符串"></a>截取字符串</h4><ul>
<li><code>#</code>： 从左开始算起，截取第一个匹配的字符</li>
<li><code>##</code>： 从左开始算起，截取最后一个匹配的字符</li>
<li><code>%</code>： 从右开始算起，截取第一个匹配的字符</li>
<li><code>%%</code>： 从右开始算起，截取最后一个匹配的字符</li>
</ul>
<p>具体参看示例代码：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">str="http://www.hello.com/world.html"</span><br><span class="line">echo "$&#123;str#*/&#125;"  # /www.hello.com/world.html</span><br><span class="line">echo "$&#123;str##*/&#125;" # world.html</span><br><span class="line">echo "$&#123;str%/*&#125;"  # http://www.hello.com</span><br><span class="line">echo "$&#123;str%%/*&#125;" # http:</span><br></pre></td></tr></table></figure>

<h2 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h2><p>bash仅支持一维数组（不支持多维数组），不限定数组的大小。数组元素的下标由0开始编号。获取数组中的元素要利用下标，下标可以是整数或算术表达式，其值应大于或等于0。</p>
<h3 id="定义数组"><a href="#定义数组" class="headerlink" title="定义数组"></a>定义数组</h3><p>可以直接声明多个值，也可以单独指定各个值：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">array1=(value0 value1 value2)</span><br><span class="line">array2[0]=value0</span><br><span class="line">array2[1]=value1</span><br><span class="line">array2[2]=value2</span><br><span class="line">echo $&#123;array1[*]&#125; # value0 value1 value2</span><br><span class="line">echo $&#123;array2[*]&#125; # value0 value1 value2</span><br></pre></td></tr></table></figure>

<h3 id="使用数组"><a href="#使用数组" class="headerlink" title="使用数组"></a>使用数组</h3><p>获取数组中的某个元素，直接方括号加下标：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">array=(value0 value1 value2)</span><br><span class="line">echo "arrry[0] is $&#123;array[0]&#125;"</span><br><span class="line">echo "arrry[1] is $&#123;array[1]&#125;"</span><br><span class="line">echo "arrry[2] is $&#123;array[2]&#125;"</span><br></pre></td></tr></table></figure>

<p>如需获取所有元素，可以使用<code>[*]</code>或<code>[@]</code>，具体参考下例：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">array=(value0 value1 value2)</span><br><span class="line">echo "arrry is $&#123;array[*]&#125;"</span><br><span class="line">echo "arrry is $&#123;array[@]&#125;"</span><br></pre></td></tr></table></figure>

<p>获取数组长度的方法与字符串相似，使用<code>#</code>：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">array=(value0 value1 value2)</span><br><span class="line">echo "length: $&#123;#array[*]&#125;"</span><br><span class="line">echo "length: $&#123;#array[@]&#125;"</span><br></pre></td></tr></table></figure>

<h2 id="echo和printf"><a href="#echo和printf" class="headerlink" title="echo和printf"></a>echo和printf</h2><p>在shell中两个命令<code>echo</code>和<code>printf</code>，都用于向屏幕显示信息，首先是<code>echo</code>的用法：</p>
<h3 id="echo"><a href="#echo" class="headerlink" title="echo"></a>echo</h3><h4 id="显示字符串"><a href="#显示字符串" class="headerlink" title="显示字符串"></a>显示字符串</h4><p><code>echo</code>用来显示字符串，当字符串使用双引号表示时，可包含转义字符或变量，字符串两端的双引号可以省略。如果想保持字符串内容原封不动输出，则用单引号表示字符串。某些情况下转义字符不能正常显示，则需要在<code>echo</code>命令之后加上参数<code>-e</code>启用转义：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo -e "abc\ndef\a"</span><br></pre></td></tr></table></figure>

<p>以上命令会输出两行字符<code>abc</code>和<code>def</code>，并且发出警告声（<code>\a</code>）。</p>
<h4 id="换行控制"><a href="#换行控制" class="headerlink" title="换行控制"></a>换行控制</h4><p>默认每次执行<code>echo</code>会在输出内容最后换行，如果在<code>echo</code>命令之后跟随参数<code>-n</code>则可以强制不换行。也可以使用以下的转义字符控制是否换行或调整光标位置，注意以下转义字符可能需要使用<code>-e</code>参数来开启：</p>
<ul>
<li><code>\b</code> 删除前一个字符</li>
<li><code>\c</code> 最后不加上换行符号</li>
<li><code>\f</code> 换行但光标仍旧停留在原来的位置</li>
<li><code>\n</code> 换行且光标移至行首</li>
<li><code>\r</code> 光标移至行首，但不换行</li>
<li><code>\t</code> 插入tab</li>
<li><code>\v</code> 与<code>\f</code>相同</li>
</ul>
<h4 id="显示命令执行结果"><a href="#显示命令执行结果" class="headerlink" title="显示命令执行结果"></a>显示命令执行结果</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">echo `date`        # 显示当前日期</span><br><span class="line">echo `expr 1 + 1`  # 2</span><br></pre></td></tr></table></figure>

<h4 id="结果定向至文件"><a href="#结果定向至文件" class="headerlink" title="结果定向至文件"></a>结果定向至文件</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo "hello" &gt; file.txt</span><br></pre></td></tr></table></figure>

<h3 id="printf"><a href="#printf" class="headerlink" title="printf"></a>printf</h3><p>shell中的<code>printf</code>命令与C语言中的相似，用于格式化输出，语法为：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">printf  format-string  [arguments...]</span><br></pre></td></tr></table></figure>

<p>如：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">printf "hello %s\n" "world"   # hello world</span><br></pre></td></tr></table></figure>

<p>注意与C语言中不同的几处：</p>
<ul>
<li><p><code>printf</code>命令不用加括号</p>
</li>
<li><p><code>format-string</code>可以没有引号，但最好加上，单引号双引号均可</p>
</li>
<li><p>参数多于格式控制符<code>%</code>时，<code>format-string</code>可以重用，可以将所有参数都转换，后边给出例子</p>
</li>
<li><p>参数少于格式控制符<code>%</code>时，那么<code>%s</code>用空字符串（<code>NULL</code>）代替，<code>%d</code>用<code>0</code>代替</p>
</li>
<li><p><code>arguments</code>使用空格分隔，不用逗号</p>
</li>
</ul>
<p>以下是几个例子：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">printf "=========== TEST 1 ===========\n"</span><br><span class="line">printf "%d %s\n" 1 "hello"</span><br><span class="line">printf "=========== TEST 2 ===========\n"</span><br><span class="line">printf '%d %s\n' 1 "world"</span><br><span class="line">printf "=========== TEST 3 ===========\n"</span><br><span class="line">printf %s hahaha</span><br><span class="line">printf "\n"</span><br><span class="line">printf "=========== TEST 4 ===========\n"</span><br><span class="line">printf "%s %s %s\n" a b c d e f g h i j</span><br><span class="line">printf "=========== TEST 5 ===========\n"</span><br><span class="line">printf "%s and %d \n" </span><br><span class="line">printf "=========== TEST 6 ===========\n"</span><br><span class="line">printf "%-10s %-8s %-4s\n" 姓名 性别 体重kg  </span><br><span class="line">printf "%-10s %-8s %-4.2f\n" 郭靖 男 66.1234 </span><br><span class="line">printf "%-10s %-8s %-4.2f\n" 杨过 男 48.6543 </span><br><span class="line">printf "%-10s %-8s %-4.2f\n" 郭芙 女 47.9876</span><br></pre></td></tr></table></figure>

<p>以上命令输出为：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">=========== TEST 1 ===========</span><br><span class="line">1 hello</span><br><span class="line">=========== TEST 2 ===========</span><br><span class="line">1 world</span><br><span class="line">=========== TEST 3 ===========</span><br><span class="line">hahaha</span><br><span class="line">=========== TEST 4 ===========</span><br><span class="line">a b c</span><br><span class="line">d e f</span><br><span class="line">g h i</span><br><span class="line">j</span><br><span class="line">=========== TEST 5 ===========</span><br><span class="line"> and 0</span><br><span class="line">=========== TEST 6 ===========</span><br><span class="line">姓名     性别   体重kg</span><br><span class="line">郭靖     男      66.12</span><br><span class="line">杨过     男      48.65</span><br><span class="line">郭芙     女      47.99</span><br></pre></td></tr></table></figure>


<h2 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h2><p>shell本身不支持运算操作，但是可以借助<code>expr</code>命令来实现：</p>
<h3 id="使用expr命令"><a href="#使用expr命令" class="headerlink" title="使用expr命令"></a>使用expr命令</h3><p>使用<code>expr</code>命令时，需要将整个语句用（`）括起来，以下是一个简单的例子： </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo `expr 1 + 1`</span><br></pre></td></tr></table></figure>

<h3 id="算术运算"><a href="#算术运算" class="headerlink" title="算术运算"></a>算术运算</h3><p>在使用<code>expr</code>进行算术运算时，注意运算数与运算符之间必须要有一个空格，否则会语法错误。以下是一些例子：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">a=25</span><br><span class="line">b=10</span><br><span class="line"></span><br><span class="line">val=`expr $a + $b`</span><br><span class="line">echo "a + b : $val"</span><br><span class="line"></span><br><span class="line">val=`expr $a - $b`</span><br><span class="line">echo "a - b : $val"</span><br><span class="line"></span><br><span class="line">val=`expr $a \* $b`</span><br><span class="line">echo "a * b : $val"</span><br><span class="line"></span><br><span class="line">val=`expr $a / $b`</span><br><span class="line">echo "a / b : $val"</span><br><span class="line"></span><br><span class="line">val=`expr $a % $b`</span><br><span class="line">echo "a % b : $val"</span><br></pre></td></tr></table></figure>

<p>以上执行结果为：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">a + b : 35</span><br><span class="line">a - b : 15</span><br><span class="line">a * b : 250</span><br><span class="line">a / b : 2</span><br><span class="line">a % b : 5</span><br></pre></td></tr></table></figure>

<h3 id="使用let命令"><a href="#使用let命令" class="headerlink" title="使用let命令"></a>使用let命令</h3><p><code>let</code>是用于计算的语句，可用于执行一个或多个表达式，变量计算中不需要加上<code>$</code>来表示变量。以下是一个示例：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">let a=10+25</span><br><span class="line">let b=10-25</span><br><span class="line">echo $a $b</span><br></pre></td></tr></table></figure>

<p>除此之外，还可以通过<code>let</code>来实现变量的自增和自减：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">num=1</span><br><span class="line">echo $num</span><br><span class="line">let num++</span><br><span class="line">echo $num</span><br><span class="line">let num--</span><br><span class="line">echo $num</span><br><span class="line">let num+=2</span><br><span class="line">echo $num</span><br><span class="line">let num-=3</span><br><span class="line">echo $num</span><br></pre></td></tr></table></figure>

<h3 id="关系比较"><a href="#关系比较" class="headerlink" title="关系比较"></a>关系比较</h3><p>用于比较关系的表达式必须用方括号括起来，且注意运算数与运算符之间必须要有一个空格。</p>
<p>在shell中，用于比较的关系的运算符有符号型的和字母型的两类，字母型的比较运算符适用于数值的比较，参考以下示例：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">a=10</span><br><span class="line">b=25</span><br><span class="line">if [ $a -eq $b ]</span><br><span class="line">then</span><br><span class="line">   echo "$a -eq $b : a is equal to b"</span><br><span class="line">else</span><br><span class="line">   echo "$a -eq $b: a is not equal to b"</span><br><span class="line">fi</span><br><span class="line">if [ $a -ne $b ]</span><br><span class="line">then</span><br><span class="line">   echo "$a -ne $b: a is not equal to b"</span><br><span class="line">else</span><br><span class="line">   echo "$a -ne $b : a is equal to b"</span><br><span class="line">fi</span><br><span class="line">if [ $a -gt $b ]</span><br><span class="line">then</span><br><span class="line">   echo "$a -gt $b: a is greater than b"</span><br><span class="line">else</span><br><span class="line">   echo "$a -gt $b: a is not greater than b"</span><br><span class="line">fi</span><br><span class="line">if [ $a -lt $b ]</span><br><span class="line">then</span><br><span class="line">   echo "$a -lt $b: a is less than b"</span><br><span class="line">else</span><br><span class="line">   echo "$a -lt $b: a is not less than b"</span><br><span class="line">fi</span><br><span class="line">if [ $a -ge $b ]</span><br><span class="line">then</span><br><span class="line">   echo "$a -ge $b: a is greater or equal to b"</span><br><span class="line">else</span><br><span class="line">   echo "$a -ge $b: a is not greater or equal to b"</span><br><span class="line">fi</span><br><span class="line">if [ $a -le $b ]</span><br><span class="line">then</span><br><span class="line">   echo "$a -le $b: a is less or equal to b"</span><br><span class="line">else</span><br><span class="line">   echo "$a -le $b: a is not less or equal to b"</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>

<p>符号型的运算符可用来比较数值，也可以用来比较字符串，以下是一些例子：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">a="A"</span><br><span class="line">b="B"</span><br><span class="line">if [ $a = $b ]</span><br><span class="line">then</span><br><span class="line">   echo "a is equal to b"</span><br><span class="line">fi</span><br><span class="line">if [ $a == $b ]</span><br><span class="line">then</span><br><span class="line">   echo "a is equal to b"</span><br><span class="line">fi</span><br><span class="line">if [ $a != $b ]</span><br><span class="line">then</span><br><span class="line">   echo "a is not equal to b"</span><br><span class="line">fi</span><br><span class="line">if [ $a &gt; $b ]</span><br><span class="line">then</span><br><span class="line">   echo "a is greater than b"</span><br><span class="line">fi</span><br><span class="line">if [ $a &lt; $b ]</span><br><span class="line">then</span><br><span class="line">   echo "a is less than b"</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>

<h3 id="布尔运算"><a href="#布尔运算" class="headerlink" title="布尔运算"></a>布尔运算</h3><p>shell中，用<code>!</code>表示“非”， <code>-a</code>表示“与”， <code>-o</code>表示“或”：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">a=10</span><br><span class="line">b=25</span><br><span class="line"></span><br><span class="line">if [ $a != $b ]</span><br><span class="line">then</span><br><span class="line">   echo "$a != $b : a 不等于 b"</span><br><span class="line">else</span><br><span class="line">   echo "$a != $b: a 等于 b"</span><br><span class="line">fi</span><br><span class="line">if [ $a -lt 100 -a $b -gt 15 ]</span><br><span class="line">then</span><br><span class="line">   echo "$a -lt 100 -a $b -gt 15 : 返回 true"</span><br><span class="line">else</span><br><span class="line">   echo "$a -lt 100 -a $b -gt 15 : 返回 false"</span><br><span class="line">fi</span><br><span class="line">if [ $a -lt 100 -o $b -gt 100 ]</span><br><span class="line">then</span><br><span class="line">   echo "$a -lt 100 -o $b -gt 100 : 返回 true"</span><br><span class="line">else</span><br><span class="line">   echo "$a -lt 100 -o $b -gt 100 : 返回 false"</span><br><span class="line">fi</span><br><span class="line">if [ $a -lt 5 -o $b -gt 100 ]</span><br><span class="line">then</span><br><span class="line">   echo "$a -lt 100 -o $b -gt 100 : 返回 true"</span><br><span class="line">else</span><br><span class="line">   echo "$a -lt 100 -o $b -gt 100 : 返回 false"</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>

<h3 id="逻辑运算符"><a href="#逻辑运算符" class="headerlink" title="逻辑运算符"></a>逻辑运算符</h3><p>逻辑运算符与布尔运算符起着相似的作用，用 <code>&amp;&amp;</code>表示“与”， <code>||</code>表示“或”：，但在表达形式上有不同，此时表达式应使用双层方括号：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">a=10</span><br><span class="line">b=25</span><br><span class="line"></span><br><span class="line">if [[ $a -lt 100 &amp;&amp; $b -gt 100 ]]</span><br><span class="line">then</span><br><span class="line">   echo "返回 true"</span><br><span class="line">else</span><br><span class="line">   echo "返回 false"</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">if [[ $a -lt 100 || $b -gt 100 ]]</span><br><span class="line">then</span><br><span class="line">   echo "返回 true"</span><br><span class="line">else</span><br><span class="line">   echo "返回 false"</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>

<h3 id="字符串测试"><a href="#字符串测试" class="headerlink" title="字符串测试"></a>字符串测试</h3><p>在shell中，除了之前的相等、不相等之外，有一些其它的字符串测试运算符，具体如下：</p>
<ul>
<li><code>-z</code>：检测字符串长度是否为0，如果是0，返回true，否则返回false</li>
<li><code>-n</code>：检测字符串长度是否为0，如果是0，返回false，否则返回true</li>
<li><code>[ ]</code>：检测字符串是否为空，如果是空，返回false，否则返回true</li>
</ul>
<p>以下是一些用法示例：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">str=''</span><br><span class="line">if [ -z $str ]</span><br><span class="line">then</span><br><span class="line">   echo "-z $str : 字符串长度为 0"</span><br><span class="line">else</span><br><span class="line">   echo "-z $str : 字符串长度不为 0"</span><br><span class="line">fi</span><br><span class="line">if [ -n "$str" ]</span><br><span class="line">then</span><br><span class="line">   echo "-n $str : 字符串长度不为 0"</span><br><span class="line">else</span><br><span class="line">   echo "-n $str : 字符串长度为 0"</span><br><span class="line">fi</span><br><span class="line">if [ $str ]</span><br><span class="line">then</span><br><span class="line">   echo "[ $str ] : 字符串不为空"</span><br><span class="line">else</span><br><span class="line">   echo "[ $str ] : 字符串为空"</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>

<h2 id="流程控制"><a href="#流程控制" class="headerlink" title="流程控制"></a>流程控制</h2><h3 id="分支结构"><a href="#分支结构" class="headerlink" title="分支结构"></a>分支结构</h3><h4 id="if语句"><a href="#if语句" class="headerlink" title="if语句"></a>if语句</h4><p>之前的示例代码中已经用到了分支结构，现在具体讲述。条件分之语句主要结构如下，其中可以没有<code>else</code>或<code>elif</code>分支，也可以有多个并列的<code>elif</code>分支。需要注意的是，分支内的语句不能为空。在分支语句的最后必须有<code>fi</code>标记结束。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">if [ expression1 ]</span><br><span class="line">then</span><br><span class="line">   Statement(s) to be executed if expression1 is true</span><br><span class="line">elif [ expression2 ]</span><br><span class="line">then</span><br><span class="line">   Statement(s) to be executed if expression2 is true</span><br><span class="line">elif [ expression3 ]</span><br><span class="line">then</span><br><span class="line">   Statement(s) to be executed if expression3 is true</span><br><span class="line">else</span><br><span class="line">   Statement(s) to be executed if no expression is true</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>

<p>在条件语句中，表达式和方括号之间必须有空格，否则会有语法错误。</p>
<h4 id="case语句"><a href="#case语句" class="headerlink" title="case语句"></a>case语句</h4><p>与C语言中的<code>switch...case</code>结构相似，但写法大不相同。shell中的<code>case</code>语句结构如下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">case 值 in</span><br><span class="line">模式1)</span><br><span class="line">    command1</span><br><span class="line">    command2</span><br><span class="line">    command3</span><br><span class="line">    ;;</span><br><span class="line">模式2）</span><br><span class="line">    command1</span><br><span class="line">    command2</span><br><span class="line">    command3</span><br><span class="line">    ;;</span><br><span class="line">*)</span><br><span class="line">    command1</span><br><span class="line">    command2</span><br><span class="line">    command3</span><br><span class="line">    ;;</span><br><span class="line">esac</span><br></pre></td></tr></table></figure>

<p>以下是一个示例，输入一个数字，根据输入的数字进行判断执行分支语句：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">echo 'Input a number between 1 to 4'</span><br><span class="line">echo 'Your number is:\c'</span><br><span class="line">read aNum</span><br><span class="line">case $aNum in</span><br><span class="line">    1)  echo 'You select 1'</span><br><span class="line">    ;;</span><br><span class="line">    2)  echo 'You select 2'</span><br><span class="line">    ;;</span><br><span class="line">    3)  echo 'You select 3'</span><br><span class="line">    ;;</span><br><span class="line">    4)  echo 'You select 4'</span><br><span class="line">    ;;</span><br><span class="line">    *)  echo 'You do not select a number between 1 to 4'</span><br><span class="line">    ;;</span><br><span class="line">esac</span><br></pre></td></tr></table></figure>

<p>如果多种模式对应同一种相同的处理方式，则可以将模式合并：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">while :</span><br><span class="line">do</span><br><span class="line">    echo -n "Input a number between 1 to 5: "</span><br><span class="line">    read aNum</span><br><span class="line">    case $aNum in</span><br><span class="line">        1|2|3|4|5) echo "Your number is $aNum!"</span><br><span class="line">        ;;</span><br><span class="line">        *) echo "You do not select a number between 1 to 5, game is over!"</span><br><span class="line">            break</span><br><span class="line">        ;;</span><br><span class="line">    esac</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<h3 id="循环结构"><a href="#循环结构" class="headerlink" title="循环结构"></a>循环结构</h3><h4 id="for循环"><a href="#for循环" class="headerlink" title="for循环"></a>for循环</h4><p><code>for</code>循环的结构如下所示，其中“列表”可以是一个数组，或者用空格分隔的数字或字符串：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">for 变量 in 列表</span><br><span class="line">do</span><br><span class="line">    command1</span><br><span class="line">    command2</span><br><span class="line">    ...</span><br><span class="line">    commandN</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<p>以下是具体的示例：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">arr=(1 2 3)</span><br><span class="line">for var in $&#123;arr[*]&#125;</span><br><span class="line">do</span><br><span class="line">    echo "$var"</span><br><span class="line">done</span><br><span class="line"><span class="meta">#</span><span class="bash"> 逐个输出数组中的元素</span></span><br><span class="line">echo '==================='</span><br><span class="line">for var in a bc def</span><br><span class="line">do</span><br><span class="line">    echo "$var"</span><br><span class="line">done</span><br><span class="line"><span class="meta">#</span><span class="bash"> 逐个输出列表字符串</span></span><br><span class="line">echo '==================='</span><br><span class="line">for var in $HOME/.bash*</span><br><span class="line">do</span><br><span class="line">   echo $var</span><br><span class="line">done</span><br><span class="line"><span class="meta">#</span><span class="bash"> 逐个输出<span class="variable">$HOME</span>目录下以.bash开头的文件</span></span><br></pre></td></tr></table></figure>

<h4 id="while循环"><a href="#while循环" class="headerlink" title="while循环"></a>while循环</h4><p><code>while</code>循环结构如下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">while condition</span><br><span class="line">do</span><br><span class="line">    command</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<p>非常简单，以下是一个示例：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">int=1</span><br><span class="line">while(( $int&lt;=5 ))</span><br><span class="line">do</span><br><span class="line">    echo $int</span><br><span class="line">    let "int++"</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<p>另一个例子：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">int=1</span><br><span class="line">while [[ $int -le 5 ]]</span><br><span class="line">do</span><br><span class="line">    echo $int</span><br><span class="line">    int=`expr $int + 1`</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<p><code>while</code>可用于构造无限循环，格式如下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">while :</span><br><span class="line">do</span><br><span class="line">    command</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<p>或</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">while true</span><br><span class="line">do</span><br><span class="line">    command</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<p>也可以使用<code>while</code>配合<code>read</code>来获取用户输入，以下是一个示例：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">echo -n 'please type a number: '</span><br><span class="line">while read num</span><br><span class="line">do</span><br><span class="line">    echo "your number is $num"</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<h4 id="until循环"><a href="#until循环" class="headerlink" title="until循环"></a>until循环</h4><p><code>until</code>循环中，循环结构一直执行，直到条件为真时停止：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">until condition</span><br><span class="line">do</span><br><span class="line">    command</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<p>以下是一个示例：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">a=9</span><br><span class="line">until [ ! $a -lt 10 ]</span><br><span class="line">do</span><br><span class="line">   echo $a</span><br><span class="line">   a=`expr $a + 1`</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<p>执行后会输出：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">9</span><br></pre></td></tr></table></figure>

<h4 id="break和continue"><a href="#break和continue" class="headerlink" title="break和continue"></a>break和continue</h4><p>使用<code>break</code>可以跳出循环，当有多层循环嵌套时，<code>break</code>可以跟一个参数用以指定跳出第几层循环，以下是两个<code>break</code>的使用案例：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">for var1 in 1 2 3</span><br><span class="line">do</span><br><span class="line">   for var2 in 0 5</span><br><span class="line">   do</span><br><span class="line">      if [ $var1 -eq 2 -a $var2 -eq 0 ]</span><br><span class="line">      then</span><br><span class="line">         break # inner loop</span><br><span class="line">      else</span><br><span class="line">         echo "$var1 $var2"</span><br><span class="line">      fi</span><br><span class="line">   done</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line">echo '================================'</span><br><span class="line"></span><br><span class="line">for var1 in 1 2 3</span><br><span class="line">do</span><br><span class="line">   for var2 in 0 5</span><br><span class="line">   do</span><br><span class="line">      if [ $var1 -eq 2 -a $var2 -eq 0 ]</span><br><span class="line">      then</span><br><span class="line">         break 2 # outter loop</span><br><span class="line">      else</span><br><span class="line">         echo "$var1 $var2"</span><br><span class="line">      fi</span><br><span class="line">   done</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<p>以上脚本执行输出结果为：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1 0</span><br><span class="line">1 5</span><br><span class="line">3 0</span><br><span class="line">3 5</span><br><span class="line">================================</span><br><span class="line">1 0</span><br><span class="line">1 5</span><br></pre></td></tr></table></figure>

<p><code>continue</code>会跳过本次循环，并继续执行循环，与C语言中相似，不再赘述。</p>
<h2 id="文件测试"><a href="#文件测试" class="headerlink" title="文件测试"></a>文件测试</h2><p>以下是shell中文件测试运算符：</p>
<table>
<thead>
<tr>
<th>运算符</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>-b file</td>
<td>检测文件是否是块设备文件，如果是，则返回 true</td>
</tr>
<tr>
<td>-c file</td>
<td>检测文件是否是字符设备文件，如果是，则返回 true</td>
</tr>
<tr>
<td>-d file</td>
<td>检测文件是否是目录，如果是，则返回 true</td>
</tr>
<tr>
<td>-f file</td>
<td>检测文件是否是普通文件（既不是目录，也不是设备文件），如果是，则返回 true</td>
</tr>
<tr>
<td>-g file</td>
<td>检测文件是否设置了 SGID 位，如果是，则返回 true</td>
</tr>
<tr>
<td>-k file</td>
<td>检测文件是否设置了粘着位（Sticky Bit），如果是，则返回 true</td>
</tr>
<tr>
<td>-p file</td>
<td>检测文件是否是具名管道，如果是，则返回 true</td>
</tr>
<tr>
<td>-u file</td>
<td>检测文件是否设置了 SUID 位，如果是，则返回 true</td>
</tr>
<tr>
<td>-r file</td>
<td>检测文件是否可读，如果是，则返回 true</td>
</tr>
<tr>
<td>-w file</td>
<td>检测文件是否可写，如果是，则返回 true</td>
</tr>
<tr>
<td>-x file</td>
<td>检测文件是否可执行，如果是，则返回 true</td>
</tr>
<tr>
<td>-s file</td>
<td>检测文件是否为空（文件大小是否大于0），不为空返回 true</td>
</tr>
<tr>
<td>-e file</td>
<td>检测文件（包括目录）是否存在，如果是，则返回 true</td>
</tr>
</tbody></table>
<p>一个例子：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> touch ./test.sh</span></span><br><span class="line">file="./test.sh"</span><br><span class="line">if [ -e $file ]</span><br><span class="line">then</span><br><span class="line">   echo "File exists"</span><br><span class="line">else</span><br><span class="line">   echo "File does not exist"</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>

<h2 id="IO重定向"><a href="#IO重定向" class="headerlink" title="IO重定向"></a>IO重定向</h2><p>Unix 命令默认从标准输入设备（stdin）获取输入，将结果输出到标准输出设备（stdout）显示。一般情况下，标准输入设备就是键盘，标准输出设备就是终端，即显示器。</p>
<h3 id="基本操作"><a href="#基本操作" class="headerlink" title="基本操作"></a>基本操作</h3><p>使用IO重定向，可以从文件读取输入，或者将输出写到文件中。以下是一些重定向操作：</p>
<table>
<thead>
<tr>
<th>指令</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>command &gt; file</td>
<td>将输出重定向到 file。</td>
</tr>
<tr>
<td>command &lt; file</td>
<td>将输入重定向到 file。</td>
</tr>
<tr>
<td>command &gt;&gt; file</td>
<td>将输出以追加的方式重定向到 file。</td>
</tr>
<tr>
<td>n &gt; file</td>
<td>将文件描述符为n的文件重定向到 file。</td>
</tr>
<tr>
<td>n &gt;&gt; file</td>
<td>将文件描述符为n的文件以追加的方式重定向到 file。</td>
</tr>
<tr>
<td>n &gt;&amp; m</td>
<td>将输出文件m和n合并。</td>
</tr>
<tr>
<td>n &lt;&amp; m</td>
<td>将输入文件m和n合并。</td>
</tr>
<tr>
<td>&lt;&lt; tag</td>
<td>将开始标记tag和结束标记tag之间的内容作为输入。</td>
</tr>
</tbody></table>
<p>注意表中的文件描述符<code>n</code>，文件描述符<code>0</code> 通常是标准输入（stdin），<code>1</code> 是标准输出（stdout），<code>2</code> 是标准错误输出（stderr）。</p>
<p>以下是一些示例：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">echo hello world &gt; file1.txt # 向file1写入</span><br><span class="line">echo hello world again &gt;&gt; file1.txt # 向file1追加</span><br><span class="line">echo 3rd line &gt;&gt; file1.txt # 向file1追加</span><br><span class="line">wc -l &lt; file1.txt &gt;&gt; file1.txt # 获取file1的行数 并追加给file1</span><br><span class="line">wc -l &lt; file1.txt # 获取file1的行数并输出 应输出 4</span><br></pre></td></tr></table></figure>

<p>此时<code>file1.txt</code>的内容如下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">hello world</span><br><span class="line">hello world again</span><br><span class="line">3rd line</span><br><span class="line">       3</span><br></pre></td></tr></table></figure>

<h3 id="Here-Document"><a href="#Here-Document" class="headerlink" title="Here Document"></a>Here Document</h3><p>Here Document 是shell中的一种特殊的重定向方式，它的基本的形式如下，用于将两个<code>delimiter</code>之间的内容传递给<code>command</code>：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">command &lt;&lt; delimiter</span><br><span class="line">    document</span><br><span class="line">delimiter</span><br></pre></td></tr></table></figure>

<p>如以下的示例代码，会输出<code>3</code>：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">wc -l &lt;&lt; deli</span><br><span class="line">	hello world</span><br><span class="line">	hello world again</span><br><span class="line">	3rd line</span><br><span class="line">deli</span><br><span class="line"><span class="meta">#</span><span class="bash"> 3</span></span><br></pre></td></tr></table></figure>

<h3 id="dev-null-文件"><a href="#dev-null-文件" class="headerlink" title="/dev/null 文件"></a>/dev/null 文件</h3><p>如果希望执行某个命令，但又不希望在屏幕上显示输出结果，那么可以将输出重定向到<code>/dev/null</code>，<code>/dev/null</code> 是一个特殊的文件，写入到它的内容都会被丢弃；如果尝试从该文件读取内容，那么什么也读不到。将命令的输出重定向到它，会起到”禁止输出”的效果。</p>
<p>例如，如果希望屏蔽 stdout（1）和 stderr（2），可以这样写：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">command &gt; /dev/null 2&gt;&amp;1</span><br></pre></td></tr></table></figure>

<h2 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h2><p>shell中的函数需要先定义后使用，定义函数的方法如下，位于开始位置的<code>function</code>关键词也可以省略不写：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">function function_name () &#123;</span><br><span class="line">    list of commands</span><br><span class="line">    [ return value ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>函数的返回值可以使用<code>return</code>显式指定，也可以略去直接使用最后一行命令执行的结果作为返回值。函数的返回值只能是整数。调用函数时，直接使用函数名即可，不需要加括号。如果向函数传递参数，直接在函数后边跟上用空格分隔的参数列表，函数内部使用<code>$n</code>的方式获取，类似于脚本执行参数。在调用函数之后，获取函数的返回值应当使用<code>#?</code>。</p>
<p>以下是两段示例代码：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">fun1()&#123;</span><br><span class="line">	echo "this is fun1"</span><br><span class="line">&#125;</span><br><span class="line">fun1</span><br><span class="line">echo "fun1 returns $?"</span><br></pre></td></tr></table></figure>

<p>执行上边的脚本会得到以下输出：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">this is fun1</span><br><span class="line">fun1 returns 0</span><br></pre></td></tr></table></figure>

<p>再来另一个示例：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">fun2()&#123;</span><br><span class="line">	if [[ $1 -gt $2 ]]</span><br><span class="line">	then</span><br><span class="line">		echo "1st arg $1 is greater than 2nd arg $2"</span><br><span class="line">	elif [[ $1 -lt $2 ]]</span><br><span class="line">	then</span><br><span class="line">		echo "1st arg $1 is less than 2nd arg $2"</span><br><span class="line">	else</span><br><span class="line">		echo "1st arg $1 is equal to 2nd arg $2"</span><br><span class="line">	fi</span><br><span class="line"></span><br><span class="line">	return `expr $1 + $2` </span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">fun2 10 25</span><br><span class="line">echo "sum of two args is $?"</span><br></pre></td></tr></table></figure>

<p>以上脚本执行结果如下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1st arg 10 is less than 2nd arg 25</span><br><span class="line">sum of two args is 35</span><br></pre></td></tr></table></figure>

<h2 id="文件包含"><a href="#文件包含" class="headerlink" title="文件包含"></a>文件包含</h2><p>和其他语言一样，shell也可以包含外部脚本。这样可以很方便的封装一些公用的代码作为一个独立的文件。包含文件格式如下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 第一种形式 注意点号(.)和文件名中间有一空格</span></span><br><span class="line">. filename</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 或者第二种形式</span></span><br><span class="line">source filename</span><br></pre></td></tr></table></figure>

<p>以下是一个简单示例：</p>
<p>首先准备文件<code>file1.sh</code>，里边输入内容如下，此时<code>file1.sh</code>不需要可执行权限：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">var1="var1 from file1"</span><br><span class="line">func1()&#123;</span><br><span class="line">	echo "func1 from file1"</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>接下来在新的脚本中输入以下内容：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">. ./file1.sh</span><br><span class="line">echo $var1</span><br><span class="line">func1</span><br></pre></td></tr></table></figure>

<p>执行之后会有以下输出结果：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var1 from file1</span><br><span class="line">func1 from file1</span><br></pre></td></tr></table></figure>


<h2 id="REFERENCE"><a href="#REFERENCE" class="headerlink" title="REFERENCE"></a>REFERENCE</h2><p><a href="https://book.douban.com/subject/3519360/" target="_blank" rel="noopener">Shell脚本学习指南 </a></p>
<p><a href="http://www.runoob.com/linux/linux-shell.html" target="_blank" rel="noopener">http://www.runoob.com/linux/linux-shell.html</a></p>
<p><a href="http://c.biancheng.net/cpp/view/6994.html" target="_blank" rel="noopener">http://c.biancheng.net/cpp/view/6994.html</a></p>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/shell/" rel="tag"># shell</a>
              <a href="/tags/bash/" rel="tag"># bash</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/post/2017-04-08-algorithm-string-kmp/" rel="prev" title="字符串匹配的KMP算法">
      <i class="fa fa-chevron-left"></i> 字符串匹配的KMP算法
    </a></div>
      <div class="post-nav-item">
    <a href="/post/2017-06-05-git-push-both-remote-repos/" rel="next" title="Git同时Push多个远端仓库">
      Git同时Push多个远端仓库 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    <div class="comments" id="gitalk-container"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#shell相关概念"><span class="nav-number">1.</span> <span class="nav-text">shell相关概念</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#shell和shell脚本"><span class="nav-number">1.1.</span> <span class="nav-text">shell和shell脚本</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#shell脚本解释器"><span class="nav-number">1.2.</span> <span class="nav-text">shell脚本解释器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#脚本的执行"><span class="nav-number">1.3.</span> <span class="nav-text">脚本的执行</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#注释"><span class="nav-number">2.</span> <span class="nav-text">注释</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#变量"><span class="nav-number">3.</span> <span class="nav-text">变量</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#定义与使用"><span class="nav-number">3.1.</span> <span class="nav-text">定义与使用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#设为只读"><span class="nav-number">3.2.</span> <span class="nav-text">设为只读</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#销毁"><span class="nav-number">3.3.</span> <span class="nav-text">销毁</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#操作环境变量"><span class="nav-number">3.4.</span> <span class="nav-text">操作环境变量</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#脚本执行参数"><span class="nav-number">4.</span> <span class="nav-text">脚本执行参数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#字符串"><span class="nav-number">5.</span> <span class="nav-text">字符串</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#字符串的表示"><span class="nav-number">5.1.</span> <span class="nav-text">字符串的表示</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#使用双引号"><span class="nav-number">5.1.1.</span> <span class="nav-text">使用双引号</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#使用单引号"><span class="nav-number">5.1.2.</span> <span class="nav-text">使用单引号</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#字符串的操作"><span class="nav-number">5.2.</span> <span class="nav-text">字符串的操作</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#获取长度"><span class="nav-number">5.2.1.</span> <span class="nav-text">获取长度</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#字符串拼接"><span class="nav-number">5.2.2.</span> <span class="nav-text">字符串拼接</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#提取子串"><span class="nav-number">5.2.3.</span> <span class="nav-text">提取子串</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#截取字符串"><span class="nav-number">5.2.4.</span> <span class="nav-text">截取字符串</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#数组"><span class="nav-number">6.</span> <span class="nav-text">数组</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#定义数组"><span class="nav-number">6.1.</span> <span class="nav-text">定义数组</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#使用数组"><span class="nav-number">6.2.</span> <span class="nav-text">使用数组</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#echo和printf"><span class="nav-number">7.</span> <span class="nav-text">echo和printf</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#echo"><span class="nav-number">7.1.</span> <span class="nav-text">echo</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#显示字符串"><span class="nav-number">7.1.1.</span> <span class="nav-text">显示字符串</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#换行控制"><span class="nav-number">7.1.2.</span> <span class="nav-text">换行控制</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#显示命令执行结果"><span class="nav-number">7.1.3.</span> <span class="nav-text">显示命令执行结果</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#结果定向至文件"><span class="nav-number">7.1.4.</span> <span class="nav-text">结果定向至文件</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#printf"><span class="nav-number">7.2.</span> <span class="nav-text">printf</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#运算符"><span class="nav-number">8.</span> <span class="nav-text">运算符</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#使用expr命令"><span class="nav-number">8.1.</span> <span class="nav-text">使用expr命令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#算术运算"><span class="nav-number">8.2.</span> <span class="nav-text">算术运算</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#使用let命令"><span class="nav-number">8.3.</span> <span class="nav-text">使用let命令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#关系比较"><span class="nav-number">8.4.</span> <span class="nav-text">关系比较</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#布尔运算"><span class="nav-number">8.5.</span> <span class="nav-text">布尔运算</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#逻辑运算符"><span class="nav-number">8.6.</span> <span class="nav-text">逻辑运算符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#字符串测试"><span class="nav-number">8.7.</span> <span class="nav-text">字符串测试</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#流程控制"><span class="nav-number">9.</span> <span class="nav-text">流程控制</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#分支结构"><span class="nav-number">9.1.</span> <span class="nav-text">分支结构</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#if语句"><span class="nav-number">9.1.1.</span> <span class="nav-text">if语句</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#case语句"><span class="nav-number">9.1.2.</span> <span class="nav-text">case语句</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#循环结构"><span class="nav-number">9.2.</span> <span class="nav-text">循环结构</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#for循环"><span class="nav-number">9.2.1.</span> <span class="nav-text">for循环</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#while循环"><span class="nav-number">9.2.2.</span> <span class="nav-text">while循环</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#until循环"><span class="nav-number">9.2.3.</span> <span class="nav-text">until循环</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#break和continue"><span class="nav-number">9.2.4.</span> <span class="nav-text">break和continue</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#文件测试"><span class="nav-number">10.</span> <span class="nav-text">文件测试</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#IO重定向"><span class="nav-number">11.</span> <span class="nav-text">IO重定向</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#基本操作"><span class="nav-number">11.1.</span> <span class="nav-text">基本操作</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Here-Document"><span class="nav-number">11.2.</span> <span class="nav-text">Here Document</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#dev-null-文件"><span class="nav-number">11.3.</span> <span class="nav-text">&#x2F;dev&#x2F;null 文件</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#函数"><span class="nav-number">12.</span> <span class="nav-text">函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#文件包含"><span class="nav-number">13.</span> <span class="nav-text">文件包含</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#REFERENCE"><span class="nav-number">14.</span> <span class="nav-text">REFERENCE</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Aillieo</p>
  <div class="site-description" itemprop="description">PROGRAMMING | GAMES | DESIGN</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">94</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">27</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">111</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2016 – 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Aillieo</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://mist.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Mist</a> 强力驱动
  </div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>

<script src="/js/utils.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="//cdn.jsdelivr.net/npm/algoliasearch@4/dist/algoliasearch-lite.umd.js"></script>
<script src="//cdn.jsdelivr.net/npm/instantsearch.js@4/dist/instantsearch.production.min.js"></script>
<script src="/js/algolia-search.js"></script>














  

  

  

<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.css">

<script>
NexT.utils.loadComments(document.querySelector('#gitalk-container'), () => {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js', () => {
    var gitalk = new Gitalk({
      clientID    : 'd4356b728d7738b0b7c9',
      clientSecret: '5258ccaf1be51bbe4467ac2c996d54b32602d41e',
      repo        : 'https://github.com/aillieo/aillieo.github.io',
      owner       : 'aillieo',
      admin       : [''],
      id          : 'b5b2921659d79ab26e50ddbea516071b',
        language: '',
      distractionFreeMode: true
    });
    gitalk.render('gitalk-container');
  }, window.Gitalk);
});
</script>

</body>
</html>
